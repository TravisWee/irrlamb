LOCAL_PATH := $(call my-dir)

PROJECT_ROOT_DIR := $(LOCAL_PATH)
PROJECT_SRC_DIR := $(PROJECT_ROOT_DIR)/src

EXCLUDE_FILE_LIST := $(PROJECT_SRC_DIR)/lua.c $(PROJECT_SRC_DIR)/luac.c

include $(CLEAR_VARS)

LOCAL_MODULE := lua

LOCAL_CFLAGS := -D_ANDROID_PLATFORM_ -O2 -Wall -Wextra -DLUA_COMPAT_5_2

LOCAL_C_INCLUDES := $(PROJECT_SRC_DIR)

LOCAL_SRC_FILES := $(subst $(LOCAL_PATH)/, , $(filter-out $(EXCLUDE_FILE_LIST), $(wildcard $(PROJECT_SRC_DIR)/*.c)))

LOCAL_EXPORT_C_INCLUDE_DIRS := $(LOCAL_PATH)/include

include $(BUILD_STATIC_LIBRARY)